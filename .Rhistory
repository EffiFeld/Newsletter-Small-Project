gghighlight(max(confirmed) > 40000)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000, label_params = )
Eki_theme <- theme(panel.grid.minor = element_blank(),
panel.grid.major = element_blank(),
axis.ticks = element_blank(),
panel.background = element_rect(fill = "transparent",colour = NA),
plot.background = element_rect(fill = "transparent",colour = NA))
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000) +
Eki_theme
direction    = "y",
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
direction    = "y",
hjust        = 0,
segment.size = 0.2)) +
Eki_theme
+
Eki_theme+
geom_label(
hjust = 1, vjust = 1, fill = "purple", colour = "white", alpha= 0.5)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000, use_direct_label = FALSE)+
Eki_theme+
geom_label(
hjust = 1, vjust = 1, fill = "purple", colour = "white", alpha= 0.5)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000, use_direct_label = FALSE)+
Eki_theme+
geom_label(aes(label = type),
hjust = 1, vjust = 1, fill = "purple", colour = "white", alpha= 0.5)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000, use_direct_label = FALSE)+
Eki_theme+
geom_label(aes(label = province_state),
hjust = 1, vjust = 1, fill = "purple", colour = "white", alpha= 0.5)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000, use_direct_label = FALSE)+
Eki_theme+
geom_label(aes(label = confirmed),
hjust = 1, vjust = 1, fill = "purple", colour = "white", alpha= 0.5)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000, use_direct_label = FALSE)+
Eki_theme+
geom_label(aes(label = province_state),
hjust = 1, vjust = 1, fill = "purple", colour = "white", alpha= 0.5)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
direction    = "y",
hjust        = 0,
segment.size = 0.2)) +
Eki_theme
?geom_label_repel
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = 0
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = 5
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = 2
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = .5
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = .3
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = .3,
label.padding = .1
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = .3,
label.padding = .1,
segment.color = "grey"
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = .3,
label.padding = .1,
segment.color = "blue"
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = .3,
label.padding = .1,
segment.color = "light blue"
)) +
Eki_theme
foo %>%
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot() +
geom_line(aes(date,confirmed, group = province_state), alpha = 1/3)+
gghighlight()
foo %>%
filter(confirmed>40000)
foo %>%
filter(confirmed>40000) %>%
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot() +
geom_line(aes(date,confirmed, group = province_state), alpha = 1/3)+
gghighlight()
foo %>%
filter(confirmed>4000) %>%
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot() +
geom_line(aes(date,confirmed, group = province_state), alpha = 1/3)+
gghighlight()
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = .3,
label.padding = .1,
segment.color = "light blue",
label.size = NA
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
box.padding = .3,
label.padding = .1,
segment.color = "light blue",
label.size = NA
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
segment.color = "light blue",
label.size = NA
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
segment.color = "light blue",
label.size = NA
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
Eki_theme
foo <- us_data %>%
pivot_wider(names_from = confirm_deaths, values_from = cum_values)
foo %>%
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot() +
geom_line(aes(date,confirmed, group = province_state), alpha = 1/3)
```
Alright, lets zoom in and start the monday before I fled NYC: March 1
```{r}
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
Eki_theme
)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
Eki_theme
library(scales)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
Eki_theme+
scale_x_continuous(labels = scales::comma)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
Eki_theme
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
Eki_theme+
scale_y_continuous(labels = paste0(ylab, "K"),
breaks = 10^5 * ylab
)
10^5
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
scale_y_continuous(labels = paste0(ylab, "K"),
breaks = 10^5 * ylab)
ylab <- c(2.5, 5.0, 7.5, 10)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
scale_y_continuous(labels = paste0(ylab, "K"),
breaks = 10^5 * ylab)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
scale_y_continuous(labels = paste0(ylab, "K"),
breaks = 10^3 * ylab)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
scale_y_continuous(labels = paste0(ylab, "K"),
breaks = 10^3 )
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
scale_y_continuous(labels = paste0(ylab, "K"),
breaks = 10^4 * ylab)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
scale_y_continuous(labels = paste0(ylab, "K"),
breaks = 10^5 * ylab)
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
scale_y_continuous(labels = paste0(ylab, "K"),
breaks = 10^4.5 * ylab)
max(foo$confirmed)
labels <- ifelse(n < 1000, n,  # less than thousands
ifelse(n < 1e6, paste0(round(n/1e3), 'k'),  # in thousands
ifelse(n < 1e9, paste0(round(n/1e6), 'M'),  # in millions
ifelse(n < 1e12, paste0(round(n/1e9), 'B'), # in billions
'too big!'
))))
# Ref: https://5harad.com/mse125/r/visualization_code.html
addUnits <- function(n) {
labels <- ifelse(n < 1000, n,  # less than thousands
ifelse(n < 1e6, paste0(round(n/1e3), 'k'),  # in thousands
ifelse(n < 1e9, paste0(round(n/1e6), 'M'),  # in millions
ifelse(n < 1e12, paste0(round(n/1e9), 'B'), # in billions
'too big!'
))))
return(labels)
}
scale_y_continuous(labels = addUnits
foo %>%
foo %>%
filter(date >= "2020-03-01") %>%  # setting a new min date by filtering for more
group_by(date, province_state)%>%
summarise(confirmed = sum(confirmed)) %>%
ggplot(aes(date,confirmed, group = province_state)) +
geom_line(alpha = 1/3)+
gghighlight(max(confirmed) > 40000,
label_params = list(
fill = NA,
segment.color = "light blue",
label.size = NA
)) +
scale_y_continuous(labels = addUnits)
max(us_data$confirm_deaths)
max(us_data$cum_values)
View(us_data %>% filter(province_state == "New York"))
foo <- us_data %>%
pivot_wider(names_from = confirm_deaths, values_from = cum_values)
